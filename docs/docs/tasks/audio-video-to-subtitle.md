---
sidebar_position: 1
title: 视频/音频转字幕
---

# 视频/音频转字幕

本章节详细介绍如何使用妙幕（SmartSub）从视频或音频文件生成字幕。这是妙幕的核心功能之一，可以快速将语音内容转换为准确的字幕文本。

## 任务界面

<div className="img-container">
  <img src="/img/screenshots/video-to-subtitle.png" alt="视频转字幕任务界面" />
</div>

## 基本操作流程

### 1. 准备工作

在开始字幕生成任务前，请确保：

- 已经[下载并安装](../intro/installation)妙幕软件
- 已经[下载了语音识别模型](../configuration/models)
- 准备好了要处理的视频或音频文件

### 2. 添加文件

有多种方式可以添加视频或音频文件：

- **点击选择文件**：点击界面中的"选择文件"按钮，然后在文件浏览器中选择要处理的文件
- **拖放文件**：直接将文件从资源管理器拖放到妙幕的文件区域
- **从剪贴板粘贴**：复制文件后，在妙幕界面上按 Ctrl+V 粘贴文件路径

### 3. 配置任务参数

添加文件后，设置以下参数：

#### 基本参数

| 参数             | 说明                                      | 推荐设置                                             |
| ---------------- | ----------------------------------------- | ---------------------------------------------------- |
| **模型**         | 选择要使用的语音识别模型                  | 普通内容选择 small，高质量需求选择 medium 或 large   |
| **语言**         | 视频/音频的主要语言                       | 如果确定，选择特定语言；否则选择"自动检测"           |
| **任务类型**     | 选择"转录"(transcribe)或"翻译"(translate) | 生成原语言字幕选择"转录"；直接生成翻译字幕选择"翻译" |
| **输出格式**     | 字幕文件格式                              | SRT 格式兼容性最好                                   |
| **输出文件目录** | 字幕文件保存位置                          | 默认与源文件相同目录                                 |

#### 高级参数（可选）

点击"高级选项"展开更多设置：

| 参数                     | 说明                     | 推荐设置                       |
| ------------------------ | ------------------------ | ------------------------------ |
| **文件名模板**           | 输出文件的命名规则       | 默认 `{filename}.{lang}.{ext}` |
| **始终使用大写**         | 是否将字幕文本转为大写   | 取决于个人偏好                 |
| **单条字幕最大持续时间** | 单条字幕的最长时间（秒） | 5-10秒                         |
| **限制每行长度**         | 每行字幕的最大字符数     | 40-60字符                      |
| **处理线程数**           | 处理任务的线程数量       | 根据CPU核心数设置              |

### 4. 开始任务

配置完参数后，点击"开始任务"按钮。软件会显示处理进度：

1. **提取音频**：从视频中提取音频轨道（如果输入是视频文件）
2. **加载模型**：加载选择的 Whisper 模型
3. **识别语音**：将音频转换为文本
4. **生成字幕**：根据时间戳生成字幕文件
5. **保存结果**：将字幕文件保存到指定位置

### 5. 查看结果

任务完成后：

- 界面上会显示"任务完成"状态
- 右侧会显示生成的字幕预览
- 可以点击"打开文件位置"查看生成的字幕文件
- 可以点击"预览"直接查看字幕内容

## 处理多个文件（批量处理）

妙幕支持同时处理多个文件，提高工作效率：

1. 添加多个文件（使用多选或多次添加）
2. 设置统一的处理参数（所有文件将使用相同设置）
3. 点击"开始任务"按钮
4. 软件会按照队列依次处理所有文件

<div className="img-container">
  <img src="/img/screenshots/batch-subtitle-generation.png" alt="批量字幕生成" />
</div>

## 实用技巧

### 提高识别准确率

1. **选择合适的模型**：

   - 英语内容使用 `.en` 后缀的模型
   - 对于困难内容（口音重、背景噪音大）使用更大的模型

2. **指定正确的语言**：

   - 如果确定视频语言，直接指定会提高准确率
   - 多语言混合的内容使用"自动检测"

3. **优化音频质量**：
   - 如果音频质量较差，可以考虑预先处理音频，提高信噪比

### 加速处理过程

1. **使用硬件加速**：

   - NVIDIA 显卡：在设置中选择 CUDA 设备
   - Apple Silicon 芯片：使用 mac-arm64 版本，自动启用 Core ML

2. **调整模型和线程数**：

   - 对于不需要极高准确率的内容，使用较小的模型
   - 根据CPU性能调整处理线程数

3. **并行处理多个文件**：
   - 设置适当的并行任务数，根据系统资源合理分配

### 自定义字幕格式

1. **调整字幕长度**：

   - "单条字幕最大持续时间"控制单条字幕的时长
   - "限制每行长度"控制字幕每行显示的字符数

2. **字幕样式**：

   - 对于需要特定样式的字幕，可以选择生成 ASS/SSA 格式
   - 生成基本字幕后，可以使用专业字幕编辑软件进一步调整

3. **文件命名**：
   - 文件名模板支持多种变量：
     - `{filename}` - 源文件名（不含扩展名）
     - `{lang}` - 字幕语言代码
     - `{ext}` - 字幕文件扩展名
     - `{date}` - 当前日期
     - `{time}` - 当前时间

## 特殊场景处理

### 长视频处理

对于超长视频（如电影、长讲座），建议：

1. 使用较小的模型（如 small）以减少处理时间
2. 考虑将视频分割成多个部分处理，然后合并字幕
3. 确保系统有足够的内存和磁盘空间

### 低质量音频处理

对于音质较差的材料（如老旧录音、噪音大的环境）：

1. 使用 medium 或 large 模型获得更好的识别结果
2. 设置合适的语言，而非自动检测
3. 考虑使用音频处理软件预先提高音频质量

### 专业术语识别

对于包含大量专业术语的内容（如医学讲座、技术演讲）：

1. 使用 large 模型以获得最高准确率
2. 生成字幕后，可能需要手动校对专业术语
3. 考虑使用专业词典辅助人工校对

## 故障排除

### 常见问题

1. **任务启动失败**：

   - 检查模型是否已正确下载
   - 确认文件格式是否受支持
   - 查看日志获取详细错误信息

2. **识别结果不准确**：

   - 尝试使用更大的模型
   - 检查是否选择了正确的语言
   - 对于背景噪音大的内容，可能需要预先处理音频

3. **处理速度很慢**：

   - 检查是否启用了硬件加速
   - 尝试使用较小的模型
   - 减少并行任务数和处理线程数

4. **字幕时间不同步**：
   - 检查视频文件是否完整
   - 尝试使用不同的模型
   - 考虑使用字幕编辑工具手动调整时间

### 错误提示解释

| 错误提示           | 可能原因                 | 解决方法                               |
| ------------------ | ------------------------ | -------------------------------------- |
| "无法加载模型"     | 模型文件损坏或未完全下载 | 重新下载模型                           |
| "内存不足"         | 模型太大或系统资源不足   | 使用较小的模型或关闭其他应用程序       |
| "不支持的文件格式" | 文件格式无法识别         | 将文件转换为支持的格式                 |
| "无法提取音频"     | 视频文件可能损坏         | 尝试修复视频文件或使用其他工具提取音频 |

## 下一步

成功生成字幕后，您可以：

- [将字幕翻译成其他语言](./subtitle-translation)
- 使用专业字幕编辑软件进一步编辑字幕
- 将字幕嵌入到视频中进行分享
