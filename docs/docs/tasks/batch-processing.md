---
sidebar_position: 3
title: 批量处理任务
---

# 批量处理任务

本章节详细介绍如何使用妙幕（SmartSub）的批量处理功能，高效处理大量文件。批量处理可以极大地提高工作效率，让您在处理多个视频或字幕文件时节省大量时间。

## 批量处理界面

<div className="img-container">
  <img src="/img/screenshots/batch-processing-interface.png" alt="批量处理界面" />
</div>

## 批量处理的类型

妙幕支持两种主要的批量处理任务：

1. **批量字幕生成**：从多个视频/音频文件生成字幕
2. **批量字幕翻译**：将多个字幕文件翻译成目标语言

## 基本操作流程

### 1. 准备工作

在开始批量处理任务前，请确保：

- 已经[下载并安装](../intro/installation)妙幕软件
- 对于字幕生成，已[下载了语音识别模型](../configuration/models)
- 对于字幕翻译，已[配置了翻译服务](../configuration/translation-services)
- 准备好了要处理的多个文件

### 2. 添加多个文件

有多种方式可以添加多个文件进行批量处理：

#### 方法一：一次选择多个文件

1. 点击"选择文件"按钮
2. 在文件选择对话框中，按住 Ctrl 键(Windows/Linux)或 Command 键(Mac)选择多个文件
3. 点击"打开"按钮，所有选中的文件将被添加到任务列表

#### 方法二：多次添加文件

1. 点击"选择文件"按钮并选择一些文件
2. 添加完成后，再次点击"选择文件"按钮添加更多文件
3. 重复此过程直到添加所有需要处理的文件

#### 方法三：拖放多个文件

1. 在文件资源管理器中选择多个文件
2. 直接将这些文件拖拽到妙幕的文件区域
3. 所有文件将被添加到任务列表

### 3. 配置批量处理参数

添加文件后，可以设置以下批量处理相关的参数：

| 参数               | 说明                               | 推荐设置                                    |
| ------------------ | ---------------------------------- | ------------------------------------------- |
| **并行任务数**     | 同时处理的文件数量                 | 根据 CPU 性能设置，通常为核心数的一半到全部 |
| **任务完成行为**   | 所有任务完成后的操作               | 根据需要选择（通知/声音/关机等）            |
| **预加载下一任务** | 是否在当前任务处理时准备下一个任务 | 建议开启，可提高处理速度                    |

除了批量处理专有参数外，还需要设置与任务类型相关的常规参数：

#### 批量字幕生成参数

| 参数         | 说明                   | 推荐设置                                         |
| ------------ | ---------------------- | ------------------------------------------------ |
| **模型**     | 用于所有文件的识别模型 | small 或 medium（取决于准确度需求）              |
| **语言**     | 所有文件的主要语言     | 如所有文件语言相同，直接指定；否则选择"自动检测" |
| **输出格式** | 生成字幕的格式         | SRT 兼容性最好                                   |

#### 批量字幕翻译参数

| 参数           | 说明                   | 推荐设置                                |
| -------------- | ---------------------- | --------------------------------------- |
| **源语言**     | 所有字幕文件的原始语言 | 根据字幕实际语言选择                    |
| **目标语言**   | 要翻译成的语言         | 根据需求选择                            |
| **翻译服务**   | 使用的翻译服务         | 根据语言对和批量需求选择（注意API限制） |
| **并行请求数** | 同时发送的翻译请求数   | 根据翻译服务的API限制设置（通常3-5个）  |

### 4. 开始批量任务

配置完参数后，点击"开始任务"按钮。妙幕会自动处理所有文件：

1. 根据设置的并行任务数，同时处理多个文件
2. 界面上会显示每个任务的进度和状态
3. 完成的任务会标记为"已完成"，并可以预览结果
4. 任务队列会自动处理，直到所有文件都完成处理

### 5. 管理任务队列

在批量处理过程中，您可以：

- **取消单个任务**：点击任务旁边的"取消"按钮
- **取消所有任务**：点击"取消所有"按钮
- **查看任务进度**：实时显示每个任务的处理进度
- **查看任务结果**：完成的任务可以点击"预览"查看结果

## 批量处理界面详解

<div className="img-container">
  <img src="/img/screenshots/batch-task-queue.png" alt="批量任务队列" />
</div>

批量处理界面包含以下主要部分：

1. **文件添加区**：用于添加要处理的文件
2. **参数设置区**：设置所有文件共用的处理参数
3. **任务队列**：显示所有待处理、正在处理和已完成的任务
4. **任务控制**：开始、暂停、取消任务的按钮
5. **进度指示**：显示整体任务完成进度

## 高级批量处理技巧

### 优化处理效率

1. **合理设置并行任务数**：

   - 性能较强的电脑可以设置更高的并行任务数
   - 处理大型视频文件时，考虑降低并行任务数
   - 显存有限的设备使用较小的模型并减少并行任务数

2. **预加载优化**：

   - 开启"预加载下一任务"可以减少任务间的等待时间
   - 但可能会增加内存使用量

3. **分批处理**：
   - 对于超大量文件（如几十个或上百个），考虑分成多批次处理
   - 每批次处理完成后再开始下一批次，避免系统负载过高

### 处理不同类型的文件

如果需要批量处理不同类型的文件（如不同语言的视频），可以采用以下策略：

1. **分组处理**：

   - 按语言或内容类型将文件分组
   - 为每组使用最适合的设置
   - 逐组进行批量处理

2. **通用设置**：
   - 使用能适应所有文件的通用设置
   - 例如，对于多语言内容，使用"自动检测"语言选项
   - 使用 medium 或 large 模型以提高各种语言的识别准确率

### 任务完成行为设置

对于长时间运行的批量任务，可以设置任务完成后的自动操作：

| 完成行为      | 适用场景                               |
| ------------- | -------------------------------------- |
| **通知**      | 标准选项，完成后通过系统通知提醒       |
| **播放声音**  | 当您在处理其他事情但需要知道任务完成时 |
| **关机**      | 夜间开始大量处理任务，完成后自动关机   |
| **休眠/睡眠** | 完成大型批处理后让电脑进入低功耗状态   |

## 批量处理的实际应用场景

### 场景一：电影字幕批量生成

如果您有一系列电影需要生成字幕：

1. 添加所有电影文件
2. 选择 medium 或 large 模型以确保高质量识别
3. 设置并行任务数为 1-2（因为电影文件较大）
4. 设置任务完成行为为"通知"或"关机"
5. 开始任务后可以离开，系统会自动完成所有处理

### 场景二：课程视频批量处理

对于教育课程的多个视频：

1. 添加所有课程视频
2. 如果是同一语言，直接指定语言；否则使用"自动检测"
3. 使用 small 或 medium 模型平衡速度和准确性
4. 设置并行任务数为 2-4（根据视频长度和系统性能）
5. 开始处理并监控前几个任务的质量，必要时调整参数

### 场景三：字幕批量翻译

如果您需要将多个字幕文件翻译为另一种语言：

1. 添加所有字幕文件
2. 设置源语言和目标语言
3. 选择适合语言对的翻译服务
4. 调整并行请求数以避免 API 限制
5. 考虑设置较长的请求间隔，避免被限流

## 故障排除

### 常见批量处理问题

1. **系统资源不足**：

   - 症状：电脑变慢，任务处理速度降低，甚至程序崩溃
   - 解决方法：减少并行任务数，关闭其他应用程序，使用较小的模型

2. **部分文件处理失败**：

   - 症状：某些文件显示错误，而其他文件正常处理
   - 解决方法：单独查看失败的文件，检查文件格式和完整性

3. **翻译 API 限流**：

   - 症状：翻译任务频繁失败，错误提示与 API 限制有关
   - 解决方法：减少并行请求数，增加请求间隔，切换到其他翻译服务

4. **处理速度变慢**：
   - 症状：随着处理时间延长，任务完成速度越来越慢
   - 解决方法：重启应用，分批处理文件，清理临时文件

### 提升批量处理成功率的建议

1. **先测试单个文件**：
   - 先用选定参数处理 1-2 个文件，确认效果满意后再批量处理
2. **监控系统资源**：

   - 注意 CPU/GPU 使用率和内存占用
   - 如果系统资源接近极限，考虑减少并行任务数

3. **备份重要文件**：

   - 处理重要文件前进行备份
   - 保存原始视频和自动生成的字幕文件

4. **检查存储空间**：
   - 确保有足够的磁盘空间存储所有输出文件
   - 特别是处理高清视频时，临时文件可能占用大量空间

## 下一步

成功完成批量处理后，您可能需要：

- 抽查部分结果，确认处理质量
- 对重要内容进行人工校对和微调
- 继续进行下一步工作，如字幕嵌入视频或上传分享
